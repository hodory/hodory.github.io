<!doctype html><html lang=ko-kr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>［Notion］Notion과 Zapier로 가계부 자동화 하기 - Web Developer Hodory</title><meta name=Description content><meta property="og:title" content="［Notion］Notion과 Zapier로 가계부 자동화 하기"><meta property="og:description" content="왜 가계부를 쓰나요?저는 예전부터 가계부를 써서 돈의 사용처를 기록하고 카테고리화 해서 어디에 돈을 많이 쓰고 있는지 흐름을 보는것을 좋아했습니다.
가계부를 Notion으로 쓰는 이유첫 가계부는 편한 가계부라는 어플을 사용했고, 그 이후 핀테크쪽 서비스가 커지면서 뱅크샐러드를 사용했었습니다. 뱅크 샐러드는 느리긴 했지만 제가 필요하다 생각했던 모든 것들을 제공 해주고 있었습니다. 토스에서 소비 라는 탭으로 연동된 계좌들의 소비 내역을 보여주는 기능도 출시하여 엄청나게 빠른 속도로 스크래핑이 되었습니다.
문제는 결혼 이후로는 제 지출 내역만 관리하는게 아니라 아내의 지출 내역도 관리가 필요했습니다."><meta property="og:type" content="article"><meta property="og:url" content="http://blog.hodory.dev/2021/12/30/acoount-book-with-notion-and-zapier/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-12-30T01:50:47+00:00"><meta property="article:modified_time" content="2021-12-30T01:50:47+00:00"><meta property="og:site_name" content="Web Developer Hodory"><meta name=twitter:card content="summary"><meta name=twitter:title content="［Notion］Notion과 Zapier로 가계부 자동화 하기"><meta name=twitter:description content="왜 가계부를 쓰나요?저는 예전부터 가계부를 써서 돈의 사용처를 기록하고 카테고리화 해서 어디에 돈을 많이 쓰고 있는지 흐름을 보는것을 좋아했습니다.
가계부를 Notion으로 쓰는 이유첫 가계부는 편한 가계부라는 어플을 사용했고, 그 이후 핀테크쪽 서비스가 커지면서 뱅크샐러드를 사용했었습니다. 뱅크 샐러드는 느리긴 했지만 제가 필요하다 생각했던 모든 것들을 제공 해주고 있었습니다. 토스에서 소비 라는 탭으로 연동된 계좌들의 소비 내역을 보여주는 기능도 출시하여 엄청나게 빠른 속도로 스크래핑이 되었습니다.
문제는 결혼 이후로는 제 지출 내역만 관리하는게 아니라 아내의 지출 내역도 관리가 필요했습니다."><meta name=application-name content="Web Developer Hodory"><meta name=apple-mobile-web-app-title content="Web Developer Hodory"><meta name=theme-color content="#f8f8f8"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=canonical href=http://blog.hodory.dev/2021/12/30/acoount-book-with-notion-and-zapier/><link rel=prev href=http://blog.hodory.dev/2020/11/21/ssl-connection-error/><link rel=next href=http://blog.hodory.dev/2021/12/31/hexo-netlify-cms-%EC%97%B0%EA%B2%B0%ED%95%98%EA%B8%B0/><link rel=stylesheet href=/css/main.css><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/color.css><link rel=stylesheet href=/css/style.min.css><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/fontawesome-free/all.min.css><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.css></noscript><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/animate/animate.min.css><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"［Notion］Notion과 Zapier로 가계부 자동화 하기","inLanguage":"ko-KR","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/blog.hodory.dev\/2021\/12\/30\/acoount-book-with-notion-and-zapier\/"},"genre":"posts","keywords":"Notion","wordcount":634,"url":"http:\/\/blog.hodory.dev\/2021\/12\/30\/acoount-book-with-notion-and-zapier\/","datePublished":"2021-12-30T01:50:47+00:00","dateModified":"2021-12-30T01:50:47+00:00","publisher":{"@type":"Organization","name":"Author"},"author":{"@type":"Person","name":"Author"},"description":""}</script><script src=//instant.page/5.2.0 defer type=module integrity=sha384-jnZyxPjiipYXnSU0ygqeac2q7CVYMbh84q0uHVRRxEtvFPiQYbXWUorga2aqZJ0z></script></head><body header-desktop header-mobile><script type=text/javascript>function setTheme(e){document.body.setAttribute("theme",e),document.documentElement.style.setProperty("color-scheme",e==="light"?"light":"dark"),window.theme=e,window.isDark=window.theme!=="light"}function saveTheme(e){window.localStorage&&localStorage.setItem("theme",e)}function getMeta(e){const t=document.getElementsByTagName("meta");for(let n=0;n<t.length;n++)if(t[n].getAttribute("name")===e)return t[n];return""}if(window.localStorage&&localStorage.getItem("theme")){let e=localStorage.getItem("theme");e==="light"||e==="dark"||e==="black"?setTheme(e):setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}else""==="light"||""==="dark"||""==="black"?(setTheme(""),saveTheme("")):(saveTheme("auto"),setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"));let metaColors={light:"#f8f8f8",dark:"#252627",black:"#000000"};getMeta("theme-color").content=metaColors[document.body.getAttribute("theme")],window.switchThemeEventSet=new Set</script><div id=back-to-top></div><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Web Developer Hodory"><img class=logo loading=lazy src=/images/logo.png srcset="/images/logo.png, /images/logo.png 1.5x, /images/logo.png 2x" sizes=auto alt=/images/logo.png title=/images/logo.png>Web Developer Hodory</a></div><div class=menu><div class=menu-inner><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Web Developer Hodory"><img class=logo loading=lazy src=/images/logo.png srcset="/images/logo.png, /images/logo.png 1.5x, /images/logo.png 2x" sizes=auto alt=/images/logo.png title=/images/logo.png>Web Developer Hodory</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><article class="page single"><h1 class="single-title animate__animated animate__flipInX">［Notion］Notion과 Zapier로 가계부 자동화 하기</h1><div class=post-meta><div class=post-meta-line><span class=post-author><span class="author fas fa-user-circle fa-fw"></span><a href=/ title=Author rel=author class=author>Author</a>
</span>&nbsp;<span class=post-category>included in </span>&nbsp;<span class=post-category>categories <a href=/categories/etc/><i class="far fa-folder fa-fw"></i>ETC</a>&nbsp;<a href=/categories/notion/><i class="far fa-folder fa-fw"></i>NOTION</a>&nbsp;<a href=/categories/zapier/><i class="far fa-folder fa-fw"></i>Zapier</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2021-12-30>2021-12-30</time>&nbsp;<i class="far fa-edit fa-fw"></i>&nbsp;<time datetime=2021-12-30>2021-12-30</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;634 words&nbsp;<i class="far fa-clock fa-fw"></i>&nbsp;3 minutes&nbsp;</div></div><div class=content id=content><h2 id=왜-가계부를-쓰나요 class=headerLink><a href=#%ec%99%9c-%ea%b0%80%ea%b3%84%eb%b6%80%eb%a5%bc-%ec%93%b0%eb%82%98%ec%9a%94 class=header-mark></a>왜 가계부를 쓰나요?</h2><p>저는 예전부터 가계부를 써서 돈의 사용처를 기록하고 카테고리화 해서 어디에 돈을 많이 쓰고 있는지 흐름을 보는것을 좋아했습니다.</p><h2 id=가계부를-notion으로-쓰는-이유 class=headerLink><a href=#%ea%b0%80%ea%b3%84%eb%b6%80%eb%a5%bc-notion%ec%9c%bc%eb%a1%9c-%ec%93%b0%eb%8a%94-%ec%9d%b4%ec%9c%a0 class=header-mark></a>가계부를 Notion으로 쓰는 이유</h2><p>첫 가계부는 편한 가계부라는 어플을 사용했고, 그 이후 핀테크쪽 서비스가 커지면서 뱅크샐러드를 사용했었습니다.
뱅크 샐러드는 느리긴 했지만 제가 필요하다 생각했던 모든 것들을 제공 해주고 있었습니다.
토스에서 <code>소비</code> 라는 탭으로 연동된 계좌들의 소비 내역을 보여주는 기능도 출시하여 엄청나게 빠른 속도로 스크래핑이 되었습니다.</p><p>문제는 결혼 이후로는 제 지출 내역만 관리하는게 아니라 아내의 지출 내역도 관리가 필요했습니다.</p><p>저는 위에 가계부를 쓰는 이유가 돈의 흐름을 보고 싶은 것이라 통계들을 볼 수 없는 종이 가계부는 쓰고 싶지 않았고,
언제든 접근할 수 있고 <strong>두사람이 같이</strong> 온라인으로 관리 할 수 있는 가계부가 필요했습니다.
개발자 답게 직접 서비스를 만드는것도 고려했으나 주 목적인 가계부를 쓰기 위해 서버를 관리하고, 비용을 내고 해야한다는것이 점점 <a href=https://www.lesstif.com/software-engineering/yak-shaving-29590364.html target=_blank rel="noopener noreferrer">야크 털 깎기</a>가 되어 가는 느낌이였습니다.
이러한 이유로 새로운 방법을 찾아보기 시작합니다.</p><p>앱을 알아봤을때 iOS 에는 <a href=https://pulapps.com/ target=_blank rel="noopener noreferrer">Buboo</a> 가계부라는 어플이 있었는데,
웬만한 공유 가계부 서비스들이 서비스 중단된 케이스가 많아서, 모든 데이터를 작은 서비스에 의존할 수 없겠다는 판단을 했습니다.</p><p>주위에 자문을 구했을때, 엑셀 템플릿을 구하여 엑셀 또는 구글 스프레드 시트를 이용하여 가계부를 쓰는 기혼자 분들이 많이 있었습니다.
그분들을 따라 블로그들을 돌아다니며 템플릿을 수집하고 가장 제가 쓰기 편한것을 3개월정도 사용했습니다.</p><p>여기서도 발견된 문제점은 제가 엑셀을 잘 사용하지 않다보니, 만들어진 템플릿을 커스텀하는데 드는 리소스가 너무 컸습니다.
여기서도 엑셀을 배우는것보단 제가 원래 많이 사용하는 노션으로 가계부를 옮기게 됩니다.
직접 만들 수도 있었지만 템플릿은 <a href="https://www.youtube.com/watch?v=bSShqJobuyY" target=_blank rel="noopener noreferrer">노션 강좌 유튜브</a>에서 구해서 사용했습니다.</p><h2 id=자동화를-하게-된-계기 class=headerLink><a href=#%ec%9e%90%eb%8f%99%ed%99%94%eb%a5%bc-%ed%95%98%ea%b2%8c-%eb%90%9c-%ea%b3%84%ea%b8%b0 class=header-mark></a>자동화를 하게 된 계기</h2><ul><li>생활비 통장</li><li>실제 결제에 사용하는 카드 N개</li></ul><p>위와 같이 나누어 쓰고 사용한 금액을 생활비 통장에서 차감하는 방식으로 사용합니다.
처음에는 노션에만 가계부를 작성을 했는데 누락되는 케이스가 있어서 보조수단으로 토스 메모 기능을 활용했습니다.</p><p>카드로 결제를 하면 어떤것을 결제했는지(PG결제 같이 사업자명이 안 나오거나 실제 매장명과 거래처명이 다른 경우가 많음) 토스 소비 탭에서 메모를 작성을 하고,
토스에 있는 내역을 기반으로 노션에 가계부를 작성을 하고 있었습니다.</p><p>이렇게 하다보니 똑같은 일을 결제 내역당 두번씩 하고 있었습니다.
하루에 1~2건이라면 문제가 없지만 하루에 결제내역이 많으면 10건까지도 있는 경우가 있다보니 제가 해야 할 반복 작업은 <code>N(결제건수)*2</code>가 되어버립니다.</p><p>이를 어떻게 해결하면 좋을까 고민하다보니 제가 하는 작업은 아래와 같습니다.</p><ol><li>토스 소비탭에서 결제 내역에 메모를 추가한다.</li><li>노션 가계부에 1의 내용을 바탕으로 저장한다.</li><li>생활비 통장에서 금액을 차감하고 결제수단을 업데이트 한다.(월별 생활비 추가)</li></ol><p>3번 동작은 송금 기능도 들어가기때문에 자동화가 애매하지만, 2번 동작은 1번 동작에 상당히 의존적이였습니다.
<code>그렇다면 1번이 다 되었을 때, 해당 내용을 읽어들여 최근에 나온 Notion API를 사용하면 되지 않을까?</code> 라고 생각하게 됩니다.</p><h2 id=어떻게-연결-하였을까 class=headerLink><a href=#%ec%96%b4%eb%96%bb%ea%b2%8c-%ec%97%b0%ea%b2%b0-%ed%95%98%ec%98%80%ec%9d%84%ea%b9%8c class=header-mark></a>어떻게 연결 하였을까</h2><p><a href=https://zapier.com/ target=_blank rel="noopener noreferrer">Zapier</a>라는 서비스에서는 구글드라이브의 이벤트와 <a href=https://nanonets.com/ target=_blank rel="noopener noreferrer">Nanonets OCR</a> 이라는 서비스를 연결 할 수 있었습니다.</p><p><figure><a class=lightgallery href=/images/account-book-with-notion-and-zapier/1.png title="Google Drive + Nanonets OCR Integrations" data-thumbnail=/images/account-book-with-notion-and-zapier/1.png><img loading=lazy src=/images/account-book-with-notion-and-zapier/1.png srcset="/images/account-book-with-notion-and-zapier/1.png, /images/account-book-with-notion-and-zapier/1.png 1.5x, /images/account-book-with-notion-and-zapier/1.png 2x" sizes=auto alt="Google Drive + Nanonets OCR Integrations"></a></figure></p><h2 id=google-drive-to-nanonets-설정 class=headerLink><a href=#google-drive-to-nanonets-%ec%84%a4%ec%a0%95 class=header-mark></a>Google Drive to Nanonets 설정</h2><p>Nanonet에서 Modeling이라고 말하는 영역별 라벨링을 아래와 같이 해줍니다.<figure><a class=lightgallery href=/images/account-book-with-notion-and-zapier/2.png title="Nanonets OCR Data Modeling" data-thumbnail=/images/account-book-with-notion-and-zapier/2.png><img loading=lazy src=/images/account-book-with-notion-and-zapier/2.png srcset="/images/account-book-with-notion-and-zapier/2.png, /images/account-book-with-notion-and-zapier/2.png 1.5x, /images/account-book-with-notion-and-zapier/2.png 2x" sizes=auto alt="Nanonets OCR Data Modeling"></a></figure></p><p>아쉽게도 해외 서비스이다보니 한국어를 인식할때에는 <code>메모를 남겨보세요</code> 와 같은 문구는 <code>메모 를 남겨 보세요</code> 와 같이 띄어쓰기가 잘못 들어 가는 경우가 많습니다.
계속해서 모델을 학습 시키면 제대로 인식 시킬거라는 기대감과 함께 문구를 수정하여 줬습니다.</p><p>그 이후 Zapier에서는 아래와 같이 설정하였습니다.<figure><a class=lightgallery href=/images/account-book-with-notion-and-zapier/3.png title="Zapier Connection to Nanonets" data-thumbnail=/images/account-book-with-notion-and-zapier/3.png><img loading=lazy src=/images/account-book-with-notion-and-zapier/3.png srcset="/images/account-book-with-notion-and-zapier/3.png, /images/account-book-with-notion-and-zapier/3.png 1.5x, /images/account-book-with-notion-and-zapier/3.png 2x" sizes=auto alt="Zapier Connection to Nanonets"></a></figure></p><p>가장 헷갈렸던 부분은 Nanonets OCR 설정에서 Google Drive의 파일의 output중 어떤 값을 사용할지 였는데, 기본값인 File을 사용하면 읽기가 가능했습니다.<figure><a class=lightgallery href=/images/account-book-with-notion-and-zapier/4.png title="Zapier Nanonets OCR google drive file" data-thumbnail=/images/account-book-with-notion-and-zapier/4.png><img loading=lazy src=/images/account-book-with-notion-and-zapier/4.png srcset="/images/account-book-with-notion-and-zapier/4.png, /images/account-book-with-notion-and-zapier/4.png 1.5x, /images/account-book-with-notion-and-zapier/4.png 2x" sizes=auto alt="Zapier Nanonets OCR google drive file"></a></figure></p><h3 id=tip class=headerLink><a href=#tip class=header-mark></a>TIP</h3><h3 id=nanonets-to-notion-설정 class=headerLink><a href=#nanonets-to-notion-%ec%84%a4%ec%a0%95 class=header-mark></a>Nanonets to Notion 설정</h3><p><figure><a class=lightgallery href=/images/account-book-with-notion-and-zapier/5.png title="Nanonets Integration" data-thumbnail=/images/account-book-with-notion-and-zapier/5.png><img loading=lazy src=/images/account-book-with-notion-and-zapier/5.png srcset="/images/account-book-with-notion-and-zapier/5.png, /images/account-book-with-notion-and-zapier/5.png 1.5x, /images/account-book-with-notion-and-zapier/5.png 2x" sizes=auto alt="Nanonets Integration"></a></figure>Nanonets 자체에서 OCR 처리 이후 Database(Mysql, MsSql, MariaDB 등)에 데이터를 넣을 수 있도록 하거나 Webhooks를 통해 처리할 수 있도록 자체적인 Integration을 제공하고 있습니다.</p><p>하지만 제가 필요한 동작은 notion에 값을 매핑하여 넣는것이기 때문에 zapier를 사용하였습니다.</p><p>Zapier에서 <code>formatter Zap</code>을 이용하여 포맷을 설정할 수 있으면 가장 좋겠지만, 이것 또한 비용이 되어 직접 처리하도록 하였습니다.</p><p><figure><a class=lightgallery href=/images/account-book-with-notion-and-zapier/6.png title="Zapier Nanonets OCR Output Mapping to Notion Database" data-thumbnail=/images/account-book-with-notion-and-zapier/6.png><img loading=lazy src=/images/account-book-with-notion-and-zapier/6.png srcset="/images/account-book-with-notion-and-zapier/6.png, /images/account-book-with-notion-and-zapier/6.png 1.5x, /images/account-book-with-notion-and-zapier/6.png 2x" sizes=auto alt="Zapier Nanonets OCR Output Mapping to Notion Database"></a></figure></p><p>필요한 값중 매핑이 정상적으로 되지 않을 수 있으므로, Content 값에 필요한 값이 입력되도록 매핑하였습니다.</p><h2 id=마무리하며 class=headerLink><a href=#%eb%a7%88%eb%ac%b4%eb%a6%ac%ed%95%98%eb%a9%b0 class=header-mark></a>마무리하며</h2><p>최대한 코딩을 하지 않고 인프라도 구성하지 않으며 사용하고 싶었습니다.</p><p>하지만 제가 알아본 서비스들은 OCR을 지원하는 서비스가 거의 없었으며 플랜도 아래와 같았습니다.</p><ul><li><p>Zapier</p><ul><li>100회/Multi-Action 지원 안함</li></ul></li><li><p>Automate</p><ul><li>300회/Multi-Action 지원 안함</li></ul></li><li><p>IFTTT</p><ul><li>Multi-Action 지원 안함</li></ul></li></ul><p>위와 같은 이유로 OCR을 지원하고 있던 Zapier를 선택하여 nanonets를 연동하였으나, nanonets의 한글 인식 미흡한점은 감안할 수 있었으나
Zapier/Nanonets의 API Limit으로 일주일만에 절반 이상을 사용하여 해당 방식으로는 어려울것 같아, NCloud OCR이 300회를 제공하고 있어 해당 방식을 연동할 계획을 가지고 있습니다.</p><p>최근들어 각종 금융사 및 핀테크 서비스에서 마이데이터 서비스를 이용하여 자산 관리를 제공하고 있는데, 해당 서비스에서 관리한 데이터를 API로 받아 볼 수 있는날이 언젠가 오길 고대합니다.</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2021-12-30</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/notion/>NOTION</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/2020/11/21/ssl-connection-error/ class=prev rel=prev title="SSL Connection Error 발생"><i class="fas fa-angle-left fa-fw"></i>SSL Connection Error 발생</a>
<a href=/2021/12/31/hexo-netlify-cms-%EC%97%B0%EA%B2%B0%ED%95%98%EA%B8%B0/ class=next rel=next title="Hexo Netlify CMS 연결하기">Hexo Netlify CMS 연결하기<i class="fas fa-angle-right fa-fw"></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreferrer" title="Hugo 0.110.0">Hugo</a>&nbsp;|&nbsp;Theme - <a href=https://github.com/HEIGE-PCloud/DoIt target=_blank rel="noopener noreferrer" title="DoIt 0.4.0"><i class="far fa-edit fa-fw"></i> DoIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank rel="noopener noreferrer"></a></span></div><div class=footer-line></div><div class=footer-line></div></div></footer></div><div id=fixed-buttons><a href=#back-to-top id=back-to-top-button class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw"></i></a></div><div class=assets><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:10},comment:{}}</script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/js/theme.min.js defer></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","360040228",{anonymize_ip:!0})</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=360040228" async></script></div></body></html>