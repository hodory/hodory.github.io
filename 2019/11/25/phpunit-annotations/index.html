<!doctype html><html lang=ko><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>PHPUnit Annotation 정리 - Web Developer Hodory</title><meta name=Description content><meta property="og:title" content="PHPUnit Annotation 정리"><meta property="og:description" content="서론 PHP Unit을 사용하면서도 잘 모르는 어노테이션을 PHPUnit v8.4 기준(2019-11-19 최신버전)으로 정리하였습니다. @author 테스트를 작성자별 그룹화 필터링 할 때 @group 어노테이션의 별칭으로, 테스트를 작성자별로 그룹화하여 필터링"><meta property="og:type" content="article"><meta property="og:url" content="http://blog.hodory.dev/2019/11/25/phpunit-annotations/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-11-25T01:18:24+00:00"><meta property="article:modified_time" content="2019-11-25T01:18:24+00:00"><meta property="og:site_name" content="Web Developer Hodory"><meta name=twitter:card content="summary"><meta name=twitter:title content="PHPUnit Annotation 정리"><meta name=twitter:description content="서론 PHP Unit을 사용하면서도 잘 모르는 어노테이션을 PHPUnit v8.4 기준(2019-11-19 최신버전)으로 정리하였습니다. @author 테스트를 작성자별 그룹화 필터링 할 때 @group 어노테이션의 별칭으로, 테스트를 작성자별로 그룹화하여 필터링"><meta name=application-name content="Web Developer Hodory"><meta name=apple-mobile-web-app-title content="Web Developer Hodory"><meta name=theme-color content="#f8f8f8"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=canonical href=http://blog.hodory.dev/2019/11/25/phpunit-annotations/><link rel=prev href=http://blog.hodory.dev/2019/09/26/aws-devday-2019-%EB%A9%94%EB%AA%A8/><link rel=next href=http://blog.hodory.dev/2019/11/26/json-parse-is-faster-than-object-literal/><link rel=stylesheet href=/css/main.css><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/color.css><link rel=stylesheet href=/css/style.min.css><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/fontawesome-free/all.min.css><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.css></noscript><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/animate/animate.min.css><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"PHPUnit Annotation 정리","inLanguage":"ko","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/blog.hodory.dev\/2019\/11\/25\/phpunit-annotations\/"},"genre":"posts","keywords":"PHP, PHPUnit, annotation","wordcount":4359,"url":"http:\/\/blog.hodory.dev\/2019\/11\/25\/phpunit-annotations\/","datePublished":"2019-11-25T01:18:24+00:00","dateModified":"2019-11-25T01:18:24+00:00","publisher":{"@type":"Organization","name":"hodory"},"author":{"@type":"Person","name":"hodory"},"description":""}</script><script src=//instant.page/5.2.0 defer type=module integrity=sha384-jnZyxPjiipYXnSU0ygqeac2q7CVYMbh84q0uHVRRxEtvFPiQYbXWUorga2aqZJ0z></script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>function setTheme(e){document.body.setAttribute("theme",e),document.documentElement.style.setProperty("color-scheme",e==="light"?"light":"dark"),window.theme=e,window.isDark=window.theme!=="light"}function saveTheme(e){window.localStorage&&localStorage.setItem("theme",e)}function getMeta(e){const t=document.getElementsByTagName("meta");for(let n=0;n<t.length;n++)if(t[n].getAttribute("name")===e)return t[n];return""}if(window.localStorage&&localStorage.getItem("theme")){let e=localStorage.getItem("theme");e==="light"||e==="dark"||e==="black"?setTheme(e):setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}else"auto"==="light"||"auto"==="dark"||"auto"==="black"?(setTheme("auto"),saveTheme("auto")):(saveTheme("auto"),setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"));let metaColors={light:"#f8f8f8",dark:"#252627",black:"#000000"};getMeta("theme-color").content=metaColors[document.body.getAttribute("theme")],window.switchThemeEventSet=new Set</script><div id=back-to-top></div><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Web Developer Hodory"><img class=logo loading=lazy src=/images/logo.png srcset="/images/logo.png, /images/logo.png 1.5x, /images/logo.png 2x" sizes=auto alt=/images/logo.png title=/images/logo.png>Web Developer Hodory</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/categories/>Categories </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-select" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i>
<select class=color-theme-select id=theme-select-desktop title="Switch Theme"><option value=light>Light</option><option value=dark>Dark</option><option value=black>Black</option><option value=auto>Auto</option></select></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Web Developer Hodory"><img class=logo loading=lazy src=/images/logo.png srcset="/images/logo.png, /images/logo.png 1.5x, /images/logo.png 2x" sizes=auto alt=/images/logo.png title=/images/logo.png>Web Developer Hodory</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/categories/ title>Categories</a><a href=javascript:void(0); class="menu-item theme-select" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i>
<select class=color-theme-select id=theme-select-mobile title="Switch Theme"><option value=light>Light</option><option value=dark>Dark</option><option value=black>Black</option><option value=auto>Auto</option></select></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto><nav id=TableOfContents><ul><li><a href=#서론>서론</a></li><li><a href=#author>@author</a><ul><li><a href=#테스트를-작성자별-그룹화-필터링-할-때>테스트를 작성자별 그룹화 필터링 할 때</a></li></ul></li><li><a href=#after>@after</a><ul><li><a href=#각-테스트가-끝난-뒤-실행-하려-할-때>각 테스트가 끝난 뒤 실행 하려 할 때</a></li></ul></li><li><a href=#afterclass>@afterClass</a><ul><li><a href=#모든-테스트가-끝난-후-실행-하려-할-때>모든 테스트가 끝난 후 실행 하려 할 때</a></li></ul></li><li><a href=#backupglobals>@backupGlobals</a><ul><li><a href=#글로벌-변수를-유지하고-싶다면>글로벌 변수를 유지하고 싶다면</a></li></ul></li><li><a href=#backupstaticattributes>@backupStaticAttributes</a><ul><li><a href=#정적-속성을-사용하려-할-때>정적 속성을 사용하려 할 때</a></li></ul></li><li><a href=#before>@before</a><ul><li><a href=#각-테스트-실행전에-실행-하려-할-때>각 테스트 실행전에 실행 하려 할 때</a></li></ul></li><li><a href=#beforeclass>@beforeClass</a><ul><li><a href=#테스트-실행전-공유-속성을-만들-때>테스트 실행전 공유 속성을 만들 때</a></li></ul></li><li><a href=#codecoverageignore>@codeCoverageIgnore*</a></li><li><a href=#covers>@covers</a><ul><li><a href=#테스트-영역을-명시하려-할-때>테스트 영역을 명시하려 할 때</a></li></ul></li><li><a href=#coversdefaultclass>@coversDefaultClass</a><ul><li><a href=#너무-긴-네임스페이스와-클래스명을-반복해서-쓰고-싶지-않을-때>너무 긴 네임스페이스와 클래스명을 반복해서 쓰고 싶지 않을 때</a></li></ul></li><li><a href=#coversnothing>@coversNothing</a><ul><li><a href=#작성예정>작성예정</a></li></ul></li><li><a href=#dataprovider>@DataProvider</a><ul><li><a href=#메소드를-이용해-파라미터를-주입하고-싶을때>메소드를 이용해 파라미터를 주입하고 싶을때</a></li></ul></li><li><a href=#depends>@depends</a><ul><li><a href=#테스트-코드간의-종속성-정의>테스트 코드간의 종속성 정의</a></li></ul></li><li><a href=#doesnotperformassertions>@doesNotPerformAssertions</a><ul><li><a href=#값에-대한-assertion-없이-테스트-코드를-실행만-하고자-할때>값에 대한 assertion 없이 테스트 코드를 실행만 하고자 할때</a></li></ul></li><li><a href=#group>@group</a><ul><li><a href=#테스트-코드에-태그를-달고-싶을때>테스트 코드에 태그를 달고 싶을때</a></li></ul></li><li><a href=#large>@large</a><ul><li><a href=#60초-이상-실행-되면-실패-처리-하고자-할-때>60초 이상 실행 되면 실패 처리 하고자 할 때</a></li></ul></li><li><a href=#medium>@medium</a><ul><li><a href=#10초-이상-실행-되면-실패-처리-하고자-할-때>10초 이상 실행 되면 실패 처리 하고자 할 때</a></li></ul></li><li><a href=#preserveglobalstate>@preserveGlobalState</a><ul><li><a href=#테스트가-별도의-프로세스에서-실행될때-직렬화-오류-방지>테스트가 별도의 프로세스에서 실행될때 직렬화 오류 방지</a></li></ul></li><li><a href=#requires>@requires</a><ul><li><a href=#특정-조건일때만-테스트를-수행하고자-할-때>특정 조건일때만 테스트를 수행하고자 할 때</a></li></ul></li><li><a href=#runtestsinseparateprocesses>@runTestsInSeparateProcesses</a><ul><li><a href=#테스트-클래스-내의-모든-테스트-메소드가-별도-php프로세스에서-테스트코드를-실행-하는것을-명시할-때>테스트 클래스 내의 모든 테스트 메소드가 별도 PHP프로세스에서 테스트코드를 실행 하는것을 명시할 때</a></li></ul></li><li><a href=#runinseparateprocess>@runInSeparateProcess</a></li><li><a href=#small>@small</a></li><li><a href=#test>@test</a><ul><li><a href=#테스트-메소드명을-test로-시작하고싶지-않을-때>테스트 메소드명을 test로 시작하고싶지 않을 때</a></li></ul></li><li><a href=#testdox>@testdox</a><ul><li><a href=#testdox-옵션으로-생성되는-문서의-설명을-대체하려-할-때>testdox 옵션으로 생성되는 문서의 설명을 대체하려 할 때</a></li></ul></li><li><a href=#testwith>@testWith</a><ul><li><a href=#주석을-이용해-파라미터를-주입하고-싶을때>주석을 이용해 파라미터를 주입하고 싶을때</a></li></ul></li><li><a href=#ticket>@ticket</a><ul><li><a href=#ticket-idjira-이슈-코드와-같은로-테스트를-필터링-할-때>Ticket ID(JIRA 이슈 코드와 같은)로 테스트를 필터링 할 때</a></li></ul></li><li><a href=#uses>@uses</a></li></ul></nav></div></div><script>document.getElementsByTagName("main")[0].setAttribute("autoTOC","true")</script><article class="page single"><h1 class="single-title animate__animated animate__flipInX">PHPUnit Annotation 정리</h1><div class=post-meta><div class=post-meta-line><span class=post-author><span class="author fas fa-user-circle fa-fw"></span><a href=/ title=Author rel=author class=author>hodory</a>
</span>&nbsp;<span class=post-category>included in </span>&nbsp;<span class=post-category>categories <a href=/categories/php/><i class="far fa-folder fa-fw"></i>PHP</a>&nbsp;<a href=/categories/phpunit/><i class="far fa-folder fa-fw"></i>PHPUnit</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2019-11-25>2019-11-25</time>&nbsp;<i class="far fa-edit fa-fw"></i>&nbsp;<time datetime=2019-11-25>2019-11-25</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;4359 words&nbsp;<i class="far fa-clock fa-fw"></i>&nbsp;9 minutes&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#서론>서론</a></li><li><a href=#author>@author</a><ul><li><a href=#테스트를-작성자별-그룹화-필터링-할-때>테스트를 작성자별 그룹화 필터링 할 때</a></li></ul></li><li><a href=#after>@after</a><ul><li><a href=#각-테스트가-끝난-뒤-실행-하려-할-때>각 테스트가 끝난 뒤 실행 하려 할 때</a></li></ul></li><li><a href=#afterclass>@afterClass</a><ul><li><a href=#모든-테스트가-끝난-후-실행-하려-할-때>모든 테스트가 끝난 후 실행 하려 할 때</a></li></ul></li><li><a href=#backupglobals>@backupGlobals</a><ul><li><a href=#글로벌-변수를-유지하고-싶다면>글로벌 변수를 유지하고 싶다면</a></li></ul></li><li><a href=#backupstaticattributes>@backupStaticAttributes</a><ul><li><a href=#정적-속성을-사용하려-할-때>정적 속성을 사용하려 할 때</a></li></ul></li><li><a href=#before>@before</a><ul><li><a href=#각-테스트-실행전에-실행-하려-할-때>각 테스트 실행전에 실행 하려 할 때</a></li></ul></li><li><a href=#beforeclass>@beforeClass</a><ul><li><a href=#테스트-실행전-공유-속성을-만들-때>테스트 실행전 공유 속성을 만들 때</a></li></ul></li><li><a href=#codecoverageignore>@codeCoverageIgnore*</a></li><li><a href=#covers>@covers</a><ul><li><a href=#테스트-영역을-명시하려-할-때>테스트 영역을 명시하려 할 때</a></li></ul></li><li><a href=#coversdefaultclass>@coversDefaultClass</a><ul><li><a href=#너무-긴-네임스페이스와-클래스명을-반복해서-쓰고-싶지-않을-때>너무 긴 네임스페이스와 클래스명을 반복해서 쓰고 싶지 않을 때</a></li></ul></li><li><a href=#coversnothing>@coversNothing</a><ul><li><a href=#작성예정>작성예정</a></li></ul></li><li><a href=#dataprovider>@DataProvider</a><ul><li><a href=#메소드를-이용해-파라미터를-주입하고-싶을때>메소드를 이용해 파라미터를 주입하고 싶을때</a></li></ul></li><li><a href=#depends>@depends</a><ul><li><a href=#테스트-코드간의-종속성-정의>테스트 코드간의 종속성 정의</a></li></ul></li><li><a href=#doesnotperformassertions>@doesNotPerformAssertions</a><ul><li><a href=#값에-대한-assertion-없이-테스트-코드를-실행만-하고자-할때>값에 대한 assertion 없이 테스트 코드를 실행만 하고자 할때</a></li></ul></li><li><a href=#group>@group</a><ul><li><a href=#테스트-코드에-태그를-달고-싶을때>테스트 코드에 태그를 달고 싶을때</a></li></ul></li><li><a href=#large>@large</a><ul><li><a href=#60초-이상-실행-되면-실패-처리-하고자-할-때>60초 이상 실행 되면 실패 처리 하고자 할 때</a></li></ul></li><li><a href=#medium>@medium</a><ul><li><a href=#10초-이상-실행-되면-실패-처리-하고자-할-때>10초 이상 실행 되면 실패 처리 하고자 할 때</a></li></ul></li><li><a href=#preserveglobalstate>@preserveGlobalState</a><ul><li><a href=#테스트가-별도의-프로세스에서-실행될때-직렬화-오류-방지>테스트가 별도의 프로세스에서 실행될때 직렬화 오류 방지</a></li></ul></li><li><a href=#requires>@requires</a><ul><li><a href=#특정-조건일때만-테스트를-수행하고자-할-때>특정 조건일때만 테스트를 수행하고자 할 때</a></li></ul></li><li><a href=#runtestsinseparateprocesses>@runTestsInSeparateProcesses</a><ul><li><a href=#테스트-클래스-내의-모든-테스트-메소드가-별도-php프로세스에서-테스트코드를-실행-하는것을-명시할-때>테스트 클래스 내의 모든 테스트 메소드가 별도 PHP프로세스에서 테스트코드를 실행 하는것을 명시할 때</a></li></ul></li><li><a href=#runinseparateprocess>@runInSeparateProcess</a></li><li><a href=#small>@small</a></li><li><a href=#test>@test</a><ul><li><a href=#테스트-메소드명을-test로-시작하고싶지-않을-때>테스트 메소드명을 test로 시작하고싶지 않을 때</a></li></ul></li><li><a href=#testdox>@testdox</a><ul><li><a href=#testdox-옵션으로-생성되는-문서의-설명을-대체하려-할-때>testdox 옵션으로 생성되는 문서의 설명을 대체하려 할 때</a></li></ul></li><li><a href=#testwith>@testWith</a><ul><li><a href=#주석을-이용해-파라미터를-주입하고-싶을때>주석을 이용해 파라미터를 주입하고 싶을때</a></li></ul></li><li><a href=#ticket>@ticket</a><ul><li><a href=#ticket-idjira-이슈-코드와-같은로-테스트를-필터링-할-때>Ticket ID(JIRA 이슈 코드와 같은)로 테스트를 필터링 할 때</a></li></ul></li><li><a href=#uses>@uses</a></li></ul></nav></div></div><div class=content id=content><h2 id=서론 class=headerLink><a href=#%ec%84%9c%eb%a1%a0 class=header-mark></a>서론</h2><hr><p>PHP Unit을 사용하면서도 잘 모르는 어노테이션을 PHPUnit v8.4 기준(2019-11-19 최신버전)으로 정리하였습니다.</p><h2 id=author class=headerLink><a href=#author class=header-mark></a>@author</h2><h3 id=테스트를-작성자별-그룹화-필터링-할-때 class=headerLink><a href=#%ed%85%8c%ec%8a%a4%ed%8a%b8%eb%a5%bc-%ec%9e%91%ec%84%b1%ec%9e%90%eb%b3%84-%ea%b7%b8%eb%a3%b9%ed%99%94-%ed%95%84%ed%84%b0%eb%a7%81-%ed%95%a0-%eb%95%8c class=header-mark></a>테스트를 작성자별 그룹화 필터링 할 때</h3><hr><p><code>@group</code> 어노테이션의 별칭으로, 테스트를 작성자별로 그룹화하여 필터링 하는데 사용할 수 있습니다.</p><h2 id=after class=headerLink><a href=#after class=header-mark></a>@after</h2><h3 id=각-테스트가-끝난-뒤-실행-하려-할-때 class=headerLink><a href=#%ea%b0%81-%ed%85%8c%ec%8a%a4%ed%8a%b8%ea%b0%80-%eb%81%9d%eb%82%9c-%eb%92%a4-%ec%8b%a4%ed%96%89-%ed%95%98%eb%a0%a4-%ed%95%a0-%eb%95%8c class=header-mark></a>각 테스트가 끝난 뒤 실행 하려 할 때</h3><hr><p>각 테스트 메소드들이 실행 된 후, 특정 메소드를 실행하고자 할때 사용할 수 있습니다.</p><p>각 테스트가 끝난 뒤 트랜잭션 커밋or롤백을 한다거나, 생성된 파일을 삭제하는 등의 처리를 하는데 사용하면 좋을 것 같습니다.</p><pre><code>namespace Tests;

use PHPUnit\Framework\TestCase;

class MyTest extends TestCase
{
    /**
     * @after
     */
    public function afterDo()
    {
        echo &quot;After Method Called&quot; . PHP_EOL;
    }

    public function test1()
    {
        echo &quot;test1 Method Called&quot; . PHP_EOL;
        self::assertTrue(true);
    }

    public function test2()
    {
        echo &quot;test2 Method Called&quot; . PHP_EOL;
        self::assertTrue(true);
    }
}

// 출력 결과
test1 Method Called
After Method Called
test2 Method Called
After Method Called
```
</code></pre><h2 id=afterclass class=headerLink><a href=#afterclass class=header-mark></a>@afterClass</h2><h3 id=모든-테스트가-끝난-후-실행-하려-할-때 class=headerLink><a href=#%eb%aa%a8%eb%93%a0-%ed%85%8c%ec%8a%a4%ed%8a%b8%ea%b0%80-%eb%81%9d%eb%82%9c-%ed%9b%84-%ec%8b%a4%ed%96%89-%ed%95%98%eb%a0%a4-%ed%95%a0-%eb%95%8c class=header-mark></a>모든 테스트가 끝난 후 실행 하려 할 때</h3><hr><p>모든 테스트가 끝난 후, 공유된 자원들을 정리하기 위해 호출할 정적 메소드를 지정 할 수 있습니다.</p><p>해당 부분에서 테스트 실행시 만든 DB 커넥션을 회수하거나, 전체 트랜잭션을 처리 하거나, 소켓을 닫는 등의 처리를 할 수 있을것 같습니다.</p><pre><code>namespace Tests;

use PHPUnit\Framework\TestCase;

class MyTest extends TestCase
{
    /**
     * @afterClass
     */
    public static function afterClassDo()
    {
        echo &quot;After Class Method Called&quot; . PHP_EOL;
    }

    public function test1()
    {
        echo &quot;test1 Method Called&quot; . PHP_EOL;
        self::assertTrue(true);
    }

    public function test2()
    {
        echo &quot;test2 Method Called&quot; . PHP_EOL;
        self::assertTrue(true);
    }
}

// 출력 결과
test1 Method Called
test2 Method Called
After Class Method Called
```
</code></pre><h2 id=backupglobals class=headerLink><a href=#backupglobals class=header-mark></a>@backupGlobals</h2><h3 id=글로벌-변수를-유지하고-싶다면 class=headerLink><a href=#%ea%b8%80%eb%a1%9c%eb%b2%8c-%eb%b3%80%ec%88%98%eb%a5%bc-%ec%9c%a0%ec%a7%80%ed%95%98%ea%b3%a0-%ec%8b%b6%eb%8b%a4%eb%a9%b4 class=header-mark></a>글로벌 변수를 유지하고 싶다면</h3><hr><p>모든 글로벌 변수를 각 테스트 전에 백업하고, 각 테스트 이후 해당 백업을 복원시킵니다.</p><p>메소드 레벨에서 재정의가 가능합니다.</p><p>해당 설명만으로는 이해가 잘 되지 않아서 직접 예제 코드를 만들어 보았습니다.
클래스 스코프 밖에 정의된 글로벌 변수인 <code>$className</code>을 <code>@backupGlobals</code> 어노테이션이 enabled 되어 있는 테스트 코드에서는 실행이전 값을 백업하여두고 테스트가 끝나면 복원이 되어,
두번째 테스트코드에서도 &ldquo;MyTest"라는 값을 가지고 있게됩니다.</p><pre><code>namespace Tests;

use PHPUnit\Framework\TestCase;

$className = &quot;MyTest&quot;;

/**
 * @backupGlobals enabled
 */
class MyTest extends TestCase
{
    public function test_글로벌변수를_백업하고_변경()
    {
        global $className;
        $this-&gt;assertEquals($className, &quot;MyTest&quot;);
        $className = &quot;Foo&quot;;
    }

    /**
     * @backupGlobals disabled
     */
    public function test_글로벌변수를_백업하지_않고_변경()
    {
        global $className;
        $this-&gt;assertEquals($className, &quot;MyTest&quot;);
        $className = &quot;Bar&quot;;
    }

    public function test_글로벌변수를_백업되어있는지_체크()
    {
        global $className;
        $this-&gt;assertEquals($className, &quot;Bar&quot;);
    }
}
```
</code></pre><h2 id=backupstaticattributes class=headerLink><a href=#backupstaticattributes class=header-mark></a>@backupStaticAttributes</h2><h3 id=정적-속성을-사용하려-할-때 class=headerLink><a href=#%ec%a0%95%ec%a0%81-%ec%86%8d%ec%84%b1%ec%9d%84-%ec%82%ac%ec%9a%a9%ed%95%98%eb%a0%a4-%ed%95%a0-%eb%95%8c class=header-mark></a><del>정적 속성을 사용하려 할 때</del></h3><hr><p><del>선언된 클래스들 안의 모든 정적 속성을 각 테스트 전에 백업하고, 각 테스트 후에 해당 백업을 복원 시킵니다.</del></p><p><del>클래스 레벨에도 선언 가능하며, 각 테스트 메소드에서 추가 제어 가능합니다.</del></p><pre><code>use PHPUnit\Framework\TestCase;
        
/**
 * @backupStaticAttributes enabled
 */
class MyTest extends TestCase
{
    public function test_정적속성을_사용하는_테스트()
    {
        // ...
    }

    /**
     * @backupStaticAttributes disabled
     */
    public function test_정적속성을_사용하지_않는_테스트()
    {
        // ...
    }
}
```
</code></pre><h2 id=before class=headerLink><a href=#before class=header-mark></a>@before</h2><h3 id=각-테스트-실행전에-실행-하려-할-때 class=headerLink><a href=#%ea%b0%81-%ed%85%8c%ec%8a%a4%ed%8a%b8-%ec%8b%a4%ed%96%89%ec%a0%84%ec%97%90-%ec%8b%a4%ed%96%89-%ed%95%98%eb%a0%a4-%ed%95%a0-%eb%95%8c class=header-mark></a>각 테스트 실행전에 실행 하려 할 때</h3><hr><p>각 테스트 메소드가 호출되기 전에 실행할 메소드를 지정할 수 있습니다.</p><p>아래와 같이 beforeMethod는 각 메소드 호출전에 실행되지만,
users 배열의 값이 증가되지는 않습니다.</p><pre><code>class MyTest extends TestCase
{
    protected $users = [];

    /**
     * @before
     */
    public function beforeMethod()
    {
        echo &quot;Before Method Called&quot; . PHP_EOL;
        $this-&gt;users[] = [
            'name' =&gt; '홍길동'
        ];
    }

    public function test1()
    {
        echo &quot;test1 Method Called&quot; . PHP_EOL;
        self::assertCount(1, $this-&gt;users);
    }

    public function test2()
    {
        echo &quot;test2 Method Called&quot; . PHP_EOL;
        self::assertCount(1, $this-&gt;users);
    }
}

// 출력 결과
Before Method Called
test1 Method Called
Before Method Called
test2 Method Called
```
</code></pre><h2 id=beforeclass class=headerLink><a href=#beforeclass class=header-mark></a>@beforeClass</h2><h3 id=테스트-실행전-공유-속성을-만들-때 class=headerLink><a href=#%ed%85%8c%ec%8a%a4%ed%8a%b8-%ec%8b%a4%ed%96%89%ec%a0%84-%ea%b3%b5%ec%9c%a0-%ec%86%8d%ec%84%b1%ec%9d%84-%eb%a7%8c%eb%93%a4-%eb%95%8c class=header-mark></a>테스트 실행전 공유 속성을 만들 때</h3><hr><p>해당 클래스에서 테스트가 실행되기전 공유 하기 위한 정보를 설정하기 위해 호출 할 static 메소드에 지정하여 사용할 수 있습니다.</p><pre><code>class MyTest extends TestCase
{
    protected $users = [];

    /**
     * @beforeClass
     */
    public static function beforeClass()
    {
        echo &quot;Before Class Called&quot; . PHP_EOL;
    }

    /**
     * @before
     */
    public function beforeMethod()
    {
        echo &quot;Before Method Called&quot; . PHP_EOL;
        $this-&gt;users[] = [
            'name' =&gt; '홍길동'
        ];
    }

    public function test1()
    {
        echo &quot;test1 Method Called&quot; . PHP_EOL;
        self::assertCount(1, $this-&gt;users);
    }

    public function test2()
    {
        echo &quot;test2 Method Called&quot; . PHP_EOL;
        self::assertCount(1, $this-&gt;users);
    }
}

// 출력 결과
Before Class Called
Before Method Called
test1 Method Called
Before Method Called
test2 Method Called
```
</code></pre><h2 id=codecoverageignore class=headerLink><a href=#codecoverageignore class=header-mark></a>@codeCoverageIgnore*</h2><hr><p>코드 커버리지 분석시 제외할 라인에 사용할 수 있습니다.</p><pre><code>/**
 * @codeCoverageIgnore
 */
class Foo
{
    public function bar()
    {
    }
}

class Bar
{
    /**
     * @codeCoverageIgnore
     */
    public function foo()
    {
    }
}

if (false) {
    // @codeCoverageIgnoreStart
    print '*';
    // @codeCoverageIgnoreEnd
}

exit; // @codeCoverageIgnore
```
</code></pre><h2 id=covers class=headerLink><a href=#covers class=header-mark></a>@covers</h2><h3 id=테스트-영역을-명시하려-할-때 class=headerLink><a href=#%ed%85%8c%ec%8a%a4%ed%8a%b8-%ec%98%81%ec%97%ad%ec%9d%84-%eb%aa%85%ec%8b%9c%ed%95%98%eb%a0%a4-%ed%95%a0-%eb%95%8c class=header-mark></a>테스트 영역을 명시하려 할 때</h3><hr><p>어떤 영역을 테스트 하고자 하는지 명시하고자 할 때 사용합니다.</p><p>이와 같이 명시 하면 IDE(PHPStorm)에서 연결되어 있어 ctrl+shift+T 를 이용해 테스트로 바로 이동이 가능해지고, usage로 찾을 수 있어 메소드명 수정시 같이 반영됩니다.</p><h2 id=coversdefaultclass class=headerLink><a href=#coversdefaultclass class=header-mark></a>@coversDefaultClass</h2><h3 id=너무-긴-네임스페이스와-클래스명을-반복해서-쓰고-싶지-않을-때 class=headerLink><a href=#%eb%84%88%eb%ac%b4-%ea%b8%b4-%eb%84%a4%ec%9e%84%ec%8a%a4%ed%8e%98%ec%9d%b4%ec%8a%a4%ec%99%80-%ed%81%b4%eb%9e%98%ec%8a%a4%eb%aa%85%ec%9d%84-%eb%b0%98%eb%b3%b5%ed%95%b4%ec%84%9c-%ec%93%b0%ea%b3%a0-%ec%8b%b6%ec%a7%80-%ec%95%8a%ec%9d%84-%eb%95%8c class=header-mark></a>너무 긴 네임스페이스와 클래스명을 반복해서 쓰고 싶지 않을 때</h3><hr><p>기본 네임스페이스나 클래스명을 명시하는데 사용할 수 있어, <code>@covers</code> 어노테이션에 긴 네임스페이스나, 클래스명을 반복해서 사용할 필요가 없어집니다.</p><p>해당 어노테이션에는 정규화 된 클래스명을 사용해야하기때문에,
모호하지 않도록 클래스명 맨 앞에 <code>\</code> 로 시작하는것을 추천합니다.</p><p>아래 예제 코드와 같이 <code>@covers \Foo\CoveredClass::publicMethod</code> 를 <code>@covers ::publicMethod</code>로 줄여 쓸 수 있는 이점을 얻게 됩니다.</p><pre><code>/**
 * @coversDefaultClass \Foo\CoveredClass
 */
class CoversDefaultClassTest extends TestCase
{
    /**
     * @covers ::publicMethod
     */
    public function testSomething()
    {
        $o = new Foo\CoveredClass;
        $o-&gt;publicMethod();
    }
}
```
</code></pre><h2 id=coversnothing class=headerLink><a href=#coversnothing class=header-mark></a>@coversNothing</h2><h3 id=작성예정 class=headerLink><a href=#%ec%9e%91%ec%84%b1%ec%98%88%ec%a0%95 class=header-mark></a>작성예정</h3><hr><p>클래스나 메소드레벨에서 사용할 수 있고 <code>@covers</code> 어노테이션을 덮어 씁니다.</p><h2 id=dataprovider class=headerLink><a href=#dataprovider class=header-mark></a>@DataProvider</h2><h3 id=메소드를-이용해-파라미터를-주입하고-싶을때 class=headerLink><a href=#%eb%a9%94%ec%86%8c%eb%93%9c%eb%a5%bc-%ec%9d%b4%ec%9a%a9%ed%95%b4-%ed%8c%8c%eb%9d%bc%eb%af%b8%ed%84%b0%eb%a5%bc-%ec%a3%bc%ec%9e%85%ed%95%98%ea%b3%a0-%ec%8b%b6%ec%9d%84%eb%95%8c class=header-mark></a>메소드를 이용해 파라미터를 주입하고 싶을때</h3><hr><p><code>@dataProvider</code> 를 사용하면 메소드의 파라미터로 전달할 수 있습니다.
Java Junit 패키지에서 JunitParams를 이용하여 <code>@Parameters</code> 어노테이션을 사용하는것과 동일한 효과를 얻을 수 있습니다.</p><ul><li>예제 코드<ul><li><p>아래 예제 코드와 같은 테스트는 배열의 각 값 들이 <code>$a</code>, <code>$b</code>, <code>$expected</code> 로 바인딩 되며,
총 4개의 배열이 자동 주입되어 테스트가 4회 수행됩니다.</p><ul><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl>  <span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl>  <span class=k>use</span> <span class=nx>PHPUnit\Framework\TestCase</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>class</span> <span class=nc>DataTest</span> <span class=k>extends</span> <span class=nx>TestCase</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=sd>/**
</span></span></span><span class=line><span class=cl><span class=sd>       * @dataProvider additionProvider
</span></span></span><span class=line><span class=cl><span class=sd>       */</span>
</span></span><span class=line><span class=cl>      <span class=k>public</span> <span class=k>function</span> <span class=nf>testAdd</span><span class=p>(</span><span class=nv>$a</span><span class=p>,</span> <span class=nv>$b</span><span class=p>,</span> <span class=nv>$expected</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>assertSame</span><span class=p>(</span><span class=nv>$expected</span><span class=p>,</span> <span class=nv>$a</span> <span class=o>+</span> <span class=nv>$b</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=k>public</span> <span class=k>function</span> <span class=nf>additionProvider</span><span class=p>()</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=k>return</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>              <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>],</span>
</span></span><span class=line><span class=cl>              <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>],</span>
</span></span><span class=line><span class=cl>              <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>],</span>
</span></span><span class=line><span class=cl>              <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>]</span>
</span></span><span class=line><span class=cl>          <span class=p>];</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span></code></pre></div></li></ul></li><li><p>아래와 같이 이름이 정의된 dataset을 사용할 수도 있습니다.</p><ul><li><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl>  <span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl>  <span class=k>use</span> <span class=nx>PHPUnit\Framework\TestCase</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>class</span> <span class=nc>DataTest</span> <span class=k>extends</span> <span class=nx>TestCase</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=sd>/**
</span></span></span><span class=line><span class=cl><span class=sd>       * @dataProvider additionProvider
</span></span></span><span class=line><span class=cl><span class=sd>       */</span>
</span></span><span class=line><span class=cl>      <span class=k>public</span> <span class=k>function</span> <span class=nf>testAdd</span><span class=p>(</span><span class=nv>$a</span><span class=p>,</span> <span class=nv>$b</span><span class=p>,</span> <span class=nv>$expected</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>assertSame</span><span class=p>(</span><span class=nv>$expected</span><span class=p>,</span> <span class=nv>$a</span> <span class=o>+</span> <span class=nv>$b</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=k>public</span> <span class=k>function</span> <span class=nf>additionProvider</span><span class=p>()</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=k>return</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>              <span class=s1>&#39;adding zeros&#39;</span>  <span class=o>=&gt;</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>],</span>
</span></span><span class=line><span class=cl>              <span class=s1>&#39;zero plus one&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>],</span>
</span></span><span class=line><span class=cl>              <span class=s1>&#39;one plus zero&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>],</span>
</span></span><span class=line><span class=cl>              <span class=s1>&#39;one plus one&#39;</span>  <span class=o>=&gt;</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>]</span>
</span></span><span class=line><span class=cl>          <span class=p>];</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span></code></pre></div></li></ul></li></ul></li></ul><h2 id=depends class=headerLink><a href=#depends class=header-mark></a>@depends</h2><h3 id=테스트-코드간의-종속성-정의 class=headerLink><a href=#%ed%85%8c%ec%8a%a4%ed%8a%b8-%ec%bd%94%eb%93%9c%ea%b0%84%ec%9d%98-%ec%a2%85%ec%86%8d%ec%84%b1-%ec%a0%95%ec%9d%98 class=header-mark></a>테스트 코드간의 종속성 정의</h3><hr><p><code>@depends</code> 어노테이션 사용시 테스트 코드간의 종속성을 선언 할 수 있습니다.</p><p>실행순서를 정의하는것은 아니지만, <code>@depends</code>에 정의된 테스트의 리턴값의 레퍼런스를 전달합니다.</p><p>레퍼런스 전달이 아닌 값의 깊은 복사를 원할 경우 <code>@depends clone</code> 를 이용하고,
PHP에서 clone으로 불리는 얕은 복사를 원할 경우 <code>@depends shallowClone</code> 를 이용하면 됩니다.</p><h2 id=doesnotperformassertions class=headerLink><a href=#doesnotperformassertions class=header-mark></a>@doesNotPerformAssertions</h2><h3 id=값에-대한-assertion-없이-테스트-코드를-실행만-하고자-할때 class=headerLink><a href=#%ea%b0%92%ec%97%90-%eb%8c%80%ed%95%9c-assertion-%ec%97%86%ec%9d%b4-%ed%85%8c%ec%8a%a4%ed%8a%b8-%ec%bd%94%eb%93%9c%eb%a5%bc-%ec%8b%a4%ed%96%89%eb%a7%8c-%ed%95%98%ea%b3%a0%ec%9e%90-%ed%95%a0%eb%95%8c class=header-mark></a>값에 대한 assertion 없이 테스트 코드를 실행만 하고자 할때</h3><hr><p>아래와 같이 테스트를 수행하지 않을 경우 <code>This test did not perform any assertions</code>와 같은 Warning이 발생됩니다.</p><p>해당 어노테이션을 사용하면 Risky 없이 <code>OK (1 test, 0 assertions)</code>로 성공 처리됩니다.</p><pre><code>namespace Tests;

use PHPUnit\Framework\TestCase;

class MyTest extends TestCase
{
    public function testAddSlashes()
    {
        echo addslashes(&quot;name='1'&quot;);
    }
}

// 출력 결과

This test did not perform any assertions

/opt/project/tests/MyTest.php:9
name=\'1\'

OK, but incomplete, skipped, or risky tests!
Tests: 1, Assertions: 0, Risky: 1.

&lt;?php

namespace Tests;

use PHPUnit\Framework\TestCase;

class MyTest extends TestCase
{
    /**
     * @doesNotPerformAssertions
     */
    public function testAddSlashes()
    {
        echo addslashes(&quot;name='1'&quot;);
    }
}
```
</code></pre><h2 id=group class=headerLink><a href=#group class=header-mark></a>@group</h2><h3 id=테스트-코드에-태그를-달고-싶을때 class=headerLink><a href=#%ed%85%8c%ec%8a%a4%ed%8a%b8-%ec%bd%94%eb%93%9c%ec%97%90-%ed%83%9c%ea%b7%b8%eb%a5%bc-%eb%8b%ac%ea%b3%a0-%ec%8b%b6%ec%9d%84%eb%95%8c class=header-mark></a>테스트 코드에 태그를 달고 싶을때</h3><hr><p><code>@group</code>어노테이션을 이용하여, 테스트 코드에 1개 이상의 태그와 같이 묶음 필터를 추가할 수 있습니다.</p><p>XML 설정 파일 주입을 이용 하거나 CLI에서 실행시 <code>--group</code> 과 <code>--exclude-group</code> 를 이용해서 테스트 실행 대상 또는 제외그룹을 설정할 수 있습니다.</p><h2 id=large class=headerLink><a href=#large class=header-mark></a>@large</h2><h3 id=60초-이상-실행-되면-실패-처리-하고자-할-때 class=headerLink><a href=#60%ec%b4%88-%ec%9d%b4%ec%83%81-%ec%8b%a4%ed%96%89-%eb%90%98%eb%a9%b4-%ec%8b%a4%ed%8c%a8-%ec%b2%98%eb%a6%ac-%ed%95%98%ea%b3%a0%ec%9e%90-%ed%95%a0-%eb%95%8c class=header-mark></a>60초 이상 실행 되면 실패 처리 하고자 할 때</h3><hr><p><code>@group large</code>의 별칭으로,<code>PHP_Invoker</code> 패키지가 설치되어 있고, strict mode가 실행되어 있으면 <strong>60초</strong> 이상 실행 될 경우 실패 처리됩니다.
해당 타임아웃에 관한 정보는 설정 정보 XML의 <code>timeoutForLargeTests</code>속성을 통해 설정 할 수 있습니다.</p><h2 id=medium class=headerLink><a href=#medium class=header-mark></a>@medium</h2><h3 id=10초-이상-실행-되면-실패-처리-하고자-할-때 class=headerLink><a href=#10%ec%b4%88-%ec%9d%b4%ec%83%81-%ec%8b%a4%ed%96%89-%eb%90%98%eb%a9%b4-%ec%8b%a4%ed%8c%a8-%ec%b2%98%eb%a6%ac-%ed%95%98%ea%b3%a0%ec%9e%90-%ed%95%a0-%eb%95%8c class=header-mark></a>10초 이상 실행 되면 실패 처리 하고자 할 때</h3><hr><p><code>@group medium</code>의 별칭으로, <code>PHP_Invoker</code> 패키지가 설치되어 있고, strict mode가 실행되어 있으면 <strong>10초</strong> 이상 실행 될 경우 실패 처리됩니다.
해당 타임아웃에 관한 정보는 설정 정보 XML의 <code>timeoutForMediumTests</code>속성을 통해 설정 할 수 있습니다.</p><p>Medium 테스트는 <code>@large</code> 테스트에 의존적이여서는 안됩니다.</p><h2 id=preserveglobalstate class=headerLink><a href=#preserveglobalstate class=header-mark></a>@preserveGlobalState</h2><h3 id=테스트가-별도의-프로세스에서-실행될때-직렬화-오류-방지 class=headerLink><a href=#%ed%85%8c%ec%8a%a4%ed%8a%b8%ea%b0%80-%eb%b3%84%eb%8f%84%ec%9d%98-%ed%94%84%eb%a1%9c%ec%84%b8%ec%8a%a4%ec%97%90%ec%84%9c-%ec%8b%a4%ed%96%89%eb%90%a0%eb%95%8c-%ec%a7%81%eb%a0%ac%ed%99%94-%ec%98%a4%eb%a5%98-%eb%b0%a9%ec%a7%80 class=header-mark></a>테스트가 별도의 프로세스에서 실행될때 직렬화 오류 방지</h3><hr><p>테스트가 별도의 프로세스에서 실행될 때, PHPUnit은부모 프로세스에서 글로벌 state를 직렬화 한 값을 자식 프로세스에서 역직렬화하여 상태를 보존합니다.</p><p>부모 프로세스에서 직렬화 할 수 없는 글로벌 state가 있는 경우, 해당 옵션을 <code>disable</code> 처리하여 방지할 수 있습니다.</p><h2 id=requires class=headerLink><a href=#requires class=header-mark></a>@requires</h2><h3 id=특정-조건일때만-테스트를-수행하고자-할-때 class=headerLink><a href=#%ed%8a%b9%ec%a0%95-%ec%a1%b0%ea%b1%b4%ec%9d%bc%eb%95%8c%eb%a7%8c-%ed%85%8c%ec%8a%a4%ed%8a%b8%eb%a5%bc-%ec%88%98%ed%96%89%ed%95%98%ea%b3%a0%ec%9e%90-%ed%95%a0-%eb%95%8c class=header-mark></a>특정 조건일때만 테스트를 수행하고자 할 때</h3><hr><p>PHP의 버전이나 extensions 설치여부 등 전제 조건을 체크하여 테스트를 건너뛸 수 있습니다.</p><p><code>&lt;</code>, <code>&lt;=</code>, <code>></code>, <code>>=</code>, <code>=</code>, <code>==</code>, <code>!=</code>, <code>&lt;></code> 등의 비교 연산자를 사용하여 버전을 비교할 수 있습니다.</p><p>해당 어노테이션을 이용해 체크 가능한 항목은 아래와 같습니다.</p><ul><li>체크 가능한 조건<ul><li>PHP<ul><li>PHP 버전</li></ul></li><li>PHPUnit<ul><li>PHP Unit 버전</li></ul></li><li>OS<ul><li><code>PHP_OS</code> 상수와 정규식으로 매칭되는 값입니다.
ex) WIN32|WINNT</li></ul></li><li>OSFAMILY<ul><li><code>PHP_OS_FAMILY</code> 상수와 매칭되는 값으로 PHP 7.2.0부터 사용가능합니다.
ex) Windows</li></ul></li><li>function<ul><li>함수 존재 여부 → function_exists()</li></ul></li><li>extension<ul><li>extension 설치 여부 및 버전 체크</li></ul></li></ul></li></ul><pre><code>/**
 * @requires extension mysqli
 */
class DatabaseTest extends TestCase
{
    /**
     * @requires PHP &gt;= 5.3
     */
    public function testConnection()
    {
                // 해당 테스트는 mysqli 확장프로그램이 설치되어 있고, PHP 버전이 5.3 이상일때 실행됩니다.
    }

    // 추가적인 테스트를 작성하였을때에도 mysqli 확장프로그램이 필요합니다.
}
```
</code></pre><h2 id=runtestsinseparateprocesses class=headerLink><a href=#runtestsinseparateprocesses class=header-mark></a>@runTestsInSeparateProcesses</h2><h3 id=테스트-클래스-내의-모든-테스트-메소드가-별도-php프로세스에서-테스트코드를-실행-하는것을-명시할-때 class=headerLink><a href=#%ed%85%8c%ec%8a%a4%ed%8a%b8-%ed%81%b4%eb%9e%98%ec%8a%a4-%eb%82%b4%ec%9d%98-%eb%aa%a8%eb%93%a0-%ed%85%8c%ec%8a%a4%ed%8a%b8-%eb%a9%94%ec%86%8c%eb%93%9c%ea%b0%80-%eb%b3%84%eb%8f%84-php%ed%94%84%eb%a1%9c%ec%84%b8%ec%8a%a4%ec%97%90%ec%84%9c-%ed%85%8c%ec%8a%a4%ed%8a%b8%ec%bd%94%eb%93%9c%eb%a5%bc-%ec%8b%a4%ed%96%89-%ed%95%98%eb%8a%94%ea%b2%83%ec%9d%84-%eb%aa%85%ec%8b%9c%ed%95%a0-%eb%95%8c class=header-mark></a>테스트 클래스 내의 모든 테스트 메소드가 별도 PHP프로세스에서 테스트코드를 실행 하는것을 명시할 때</h3><hr><p>해당 테스트 클래스 내의 모든 테스트 메소드들이 별도의 PHP 프로세스에서 실행되어야 함을 표시 할 때 사용합니다.</p><p>PHPUnit은 직렬화를 통해 Global state를 유지하려 하기 때문에, 직렬화가 불가능한 부분은 <code>@preserveGlobalState</code>를 참조하세요.</p><h2 id=runinseparateprocess class=headerLink><a href=#runinseparateprocess class=header-mark></a>@runInSeparateProcess</h2><hr><p>해당 테스트 메소드가 별도의 PHP 프로세스에서 실행되어야 함을 표시 할 때 사용합니다.</p><p>PHPUnit은 직렬화를 통해 Global state를 유지하려 하기 때문에, 직렬화가 불가능한 부분은 <code>@preserveGlobalState</code>를 참조하세요.</p><h2 id=small class=headerLink><a href=#small class=header-mark></a>@small</h2><hr><p><code>@group small</code>의 별칭으로, <code>PHP_Invoker</code> 패키지가 설치되어 있고, strict mode가 실행되어 있으면 <strong>1초</strong> 이상 실행 될 경우 실패 처리됩니다.
해당 타임아웃에 관한 정보는 설정 정보 XML의 <code>timeoutForSmallTests</code>속성을 통해 설정 할 수 있습니다.</p><p>Medium 테스트는 <code>@large</code> 와 <code>@medium</code>로 마킹된 테스트에 의존적이여서는 안됩니다.</p><p>※ <strong>테스트의 실행 시간 제어를 하고자 할 때, <code>@small</code>, <code>@medium</code>, <code>@large</code> 와 같은 어노테이션을 명시적으로 사용해야합니다.</strong></p><h2 id=test class=headerLink><a href=#test class=header-mark></a>@test</h2><h3 id=테스트-메소드명을-test로-시작하고싶지-않을-때 class=headerLink><a href=#%ed%85%8c%ec%8a%a4%ed%8a%b8-%eb%a9%94%ec%86%8c%eb%93%9c%eb%aa%85%ec%9d%84-test%eb%a1%9c-%ec%8b%9c%ec%9e%91%ed%95%98%ea%b3%a0%ec%8b%b6%ec%a7%80-%ec%95%8a%ec%9d%84-%eb%95%8c class=header-mark></a>테스트 메소드명을 test로 시작하고싶지 않을 때</h3><hr><p>테스트 메소드는 메소드명의 prefix로 test를 사용합니다.</p><p>테스트 메소드명의 prefix로 <code>test</code>를 사용하지 않는 대안으로, 주석에 <code>@test</code> 어노테이션을 사용하면 테스트 메소드라고 인식됩니다.</p><p><figure><a class=lightgallery href=/images/phpunit-annotations/eeb49a85-fdd7-40ee-99df-60579993b1a3.png title=/images/phpunit-annotations/eeb49a85-fdd7-40ee-99df-60579993b1a3.png data-thumbnail=/images/phpunit-annotations/eeb49a85-fdd7-40ee-99df-60579993b1a3.png><img loading=lazy src=/images/phpunit-annotations/eeb49a85-fdd7-40ee-99df-60579993b1a3.png srcset="/images/phpunit-annotations/eeb49a85-fdd7-40ee-99df-60579993b1a3.png, /images/phpunit-annotations/eeb49a85-fdd7-40ee-99df-60579993b1a3.png 1.5x, /images/phpunit-annotations/eeb49a85-fdd7-40ee-99df-60579993b1a3.png 2x" sizes=auto alt=/images/phpunit-annotations/eeb49a85-fdd7-40ee-99df-60579993b1a3.png></a></figure></p><p><figure><a class=lightgallery href=/images/phpunit-annotations/cbdae160-7e46-49e4-9d93-0a3584597625.png title=/images/phpunit-annotations/cbdae160-7e46-49e4-9d93-0a3584597625.png data-thumbnail=/images/phpunit-annotations/cbdae160-7e46-49e4-9d93-0a3584597625.png><img loading=lazy src=/images/phpunit-annotations/cbdae160-7e46-49e4-9d93-0a3584597625.png srcset="/images/phpunit-annotations/cbdae160-7e46-49e4-9d93-0a3584597625.png, /images/phpunit-annotations/cbdae160-7e46-49e4-9d93-0a3584597625.png 1.5x, /images/phpunit-annotations/cbdae160-7e46-49e4-9d93-0a3584597625.png 2x" sizes=auto alt=/images/phpunit-annotations/cbdae160-7e46-49e4-9d93-0a3584597625.png></a></figure></p><h2 id=testdox class=headerLink><a href=#testdox class=header-mark></a>@testdox</h2><h3 id=testdox-옵션으로-생성되는-문서의-설명을-대체하려-할-때 class=headerLink><a href=#testdox-%ec%98%b5%ec%85%98%ec%9c%bc%eb%a1%9c-%ec%83%9d%ec%84%b1%eb%90%98%eb%8a%94-%eb%ac%b8%ec%84%9c%ec%9d%98-%ec%84%a4%eb%aa%85%ec%9d%84-%eb%8c%80%ec%b2%b4%ed%95%98%eb%a0%a4-%ed%95%a0-%eb%95%8c class=header-mark></a>testdox 옵션으로 생성되는 문서의 설명을 대체하려 할 때</h3><hr><p><code>--testdox</code>를 옵션으로 주었을때, 메소드의 이름으로부터 만들어진 설명을 오버라이딩 할 수 있습니다.</p><p>클래스 또는 메소드의 설명을 더 명확히 만들어 agile document를 만들 수 있습니다.</p><p><strong>주의할 점으로는 PHPUnit v7.0까지는 어노테이션 파싱 오류로, @test로 인식되어 동작합니다.</strong></p><h2 id=testwith class=headerLink><a href=#testwith class=header-mark></a>@testWith</h2><h3 id=주석을-이용해-파라미터를-주입하고-싶을때 class=headerLink><a href=#%ec%a3%bc%ec%84%9d%ec%9d%84-%ec%9d%b4%ec%9a%a9%ed%95%b4-%ed%8c%8c%eb%9d%bc%eb%af%b8%ed%84%b0%eb%a5%bc-%ec%a3%bc%ec%9e%85%ed%95%98%ea%b3%a0-%ec%8b%b6%ec%9d%84%eb%95%8c class=header-mark></a>주석을 이용해 파라미터를 주입하고 싶을때</h3><hr><p><code>@dataProvider</code>는 호출될 메소드를 필요로 하지만, 주석만을 이용해 테스트하고자 할 때에는
<code>@testWith</code>를 사용할 수 있습니다.</p><p>JSON 포맷은 연관배열로 주입됩니다.</p><p><strong>주의 할 점은 여러개의 dataset을 정의할 때에는 라인당 하나씩 지정해야합니다.</strong></p><p>아래의 두개의 코드는 동일하게 동작합니다.</p><pre><code>/**
 * @param string    $input
 * @param int       $expectedLength
 *
 * @testWith        [&quot;test&quot;, 4]
 *                  [&quot;longer-string&quot;, 13]
 */
public function testStringLength(string $input, int $expectedLength)
{
    $this-&gt;assertSame($expectedLength, strlen($input));
}

/**
 * @param string    $input
 * @param int       $expectedLength
 *
 * @dataProvider    additionProvider
 */
public function testStringLengthWithDataProvider(string $input, int $expectedLength)
{
    $this-&gt;assertSame($expectedLength, strlen($input));
}

public function additionProvider()
{
        return [
                [&quot;test&quot;, 4],
                [&quot;longer-string&quot;, 13]
        ];
}

/**
 * @param array     $array
 * @param array     $keys
 *
 * @testWith        [{&quot;day&quot;: &quot;monday&quot;, &quot;conditions&quot;: &quot;sunny&quot;}, [&quot;day&quot;, &quot;conditions&quot;]]
 */
public function testArrayKeys($array, $keys)
{
    $this-&gt;assertSame($keys, array_keys($array));
}

/**
 * @param array     $array
 * @param array     $keys
 *
 * @dataProvider    additionProvider
 */
public function testArrayKeysWithDataProvider($array, $keys)
{
    $this-&gt;assertSame($keys, array_keys($array));
}

public function additionProvider()
{
        return [
                [[&quot;day&quot; =&gt; &quot;monday&quot;, &quot;conditions&quot; =&gt; &quot;sunny&quot;], [&quot;day&quot;, &quot;conditions&quot;]]
        ];
}
```
</code></pre><h2 id=ticket class=headerLink><a href=#ticket class=header-mark></a>@ticket</h2><h3 id=ticket-idjira-이슈-코드와-같은로-테스트를-필터링-할-때 class=headerLink><a href=#ticket-idjira-%ec%9d%b4%ec%8a%88-%ec%bd%94%eb%93%9c%ec%99%80-%ea%b0%99%ec%9d%80%eb%a1%9c-%ed%85%8c%ec%8a%a4%ed%8a%b8%eb%a5%bc-%ed%95%84%ed%84%b0%eb%a7%81-%ed%95%a0-%eb%95%8c class=header-mark></a>Ticket ID(JIRA 이슈 코드와 같은)로 테스트를 필터링 할 때</h3><hr><p><code>@group</code> 어노테이션의 별칭. ticket ID를 이용하여 테스트를 필터링 할 수 있도록 하여줍니다.</p><h2 id=uses class=headerLink><a href=#uses class=header-mark></a>@uses</h2><hr><p>테스트에 의해 실행될 코드를 지정합니다.</p><p>좋은 예제는 아래와 같이 유닛 테스트 코드에 필요한 Object 값 입니다.</p><p>해당 어노테이션에는 정규화 된 클래스명을 사용해야하기때문에,
모호하지 않도록 클래스명 맨 앞에 <code>\</code> 로 시작하는것을 추천합니다.</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2019-11-25</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/php/>PHP</a>,&nbsp;<a href=/tags/phpunit/>PHPUnit</a>,&nbsp;<a href=/tags/annotation/>annotation</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/2019/09/26/aws-devday-2019-%EB%A9%94%EB%AA%A8/ class=prev rel=prev title="AWS Dev Day Seoul, 2019 메모"><i class="fas fa-angle-left fa-fw"></i>AWS Dev Day Seoul, 2019 메모</a>
<a href=/2019/11/26/json-parse-is-faster-than-object-literal/ class=next rel=next title="［JS］Object literal 보다 JSON.parse()가 더 빠르다">［JS］Object literal 보다 JSON.parse()가 더 빠르다<i class="fas fa-angle-right fa-fw"></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreferrer" title="Hugo 0.110.0">Hugo</a>&nbsp;|&nbsp;Theme - <a href=https://github.com/HEIGE-PCloud/DoIt target=_blank rel="noopener noreferrer" title="DoIt 0.4.0"><i class="far fa-edit fa-fw"></i> DoIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank rel="noopener noreferrer">hodory</a></span></div><div class=footer-line></div><div class=footer-line></div></div></footer></div><div id=fixed-buttons><a href=#back-to-top id=back-to-top-button class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw"></i></a></div><div class=assets><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:10},comment:{}}</script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/js/theme.min.js defer></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","360040228",{anonymize_ip:!0})</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=360040228" async></script></div></body></html>